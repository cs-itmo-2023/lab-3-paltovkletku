# Отчет по лабораторной работе №3

## Введение

Цель: создать три виртуальные машины и настроить между ними сетевой доступ.

Задачи:
1. Создать, настроить виртуальную машину А, обеспечить ей доступ в Интернет.
2. Создать, настроить виртуальную машину Б, обеспечить сетевой досутп из машины А в машину Б.
3. Создать, настроить виртуальную машину В, обеспечить сетевой доступ из машины А в машину В так, чтобы не существовало доступа из машины Б в машину В. 
4. Проверить доступ.

## Основная часть

### Проделанные шаги

Была создана первая виртуальная машина А из образа Ubuntu Server. При установке выбрано имя хоста - anna1. Обновляем её с помощью sudo apt update и sudo apt upgrade. 

Доступ в Интернет был настроен автоматически с помощью NAT (адаптер 1). С помощью пинга проверим доступ:

Проверка доступа в Интернет:

![ping_yandex](https://github.com/cs-itmo-2023/lab-3-paltovkletku/blob/main/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202023-10-22%2012-29-53.png)

Клонируем машину А, изменяем имя хоста на anna2 командой sudo hostnamectl set-hostname anna2. Машина Б создана.

Таким же образом создадим машину В, изменив имя хоста на anna3.

В VirtualBox через Иинструменты-Сеть-Создать создаём виртулаьную сеть хоста - vboxnet0 и vboxnet1. Здесь же прописаны их ip-адреса (192.168.56.1 и 192.168.7.1 соответственно).

В настройках машины А: адаптер 1 - NAT (автоматически), включаем адаптер 2 - Виртуальный адаптер хоста - 'vboxnet0', адаптер 3 - Виртуальный адаптер хоста - 'vboxnet1'.

В настройках машины Б: включаем адаптер 2 - Виртуальный адаптер хоста - 'vboxnet0'.

В настройках машины В: включаем адаптер 2 - Виртуальный адаптер хоста - 'vboxnet1'.

Первая сеть - для доступа А-Б, вторая - для доступа А-В. Таким образом, не будет доступа Б-В.

С помощью sudo apt install ifconfig устанавливаем ifconfig. Через ifconfig узнаем, какие сетевые интерфейсы доступны.

Настроим сетевые интерфейсы, вручную прописав маршруты и назначив ip-адреса.

Для машины A: Вызываем команду sudo nano /etc/netplan/00-installer-config.yaml. В открывшемся файле конфигурации прописываем: 

![netplan A](https://github.com/cs-itmo-2023/lab-3-paltovkletku/blob/main/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202023-10-22%2022-23-47.png)

Применяем конфиг, прописав netplan apply. reboot, чтобы перезагрузить систему.

Для машины Б: Вызываем команду sudo nano /etc/netplan/00-installer-config.yaml. В открывшемся файле конфигурации прописываем: 

![netplan Б](https://github.com/cs-itmo-2023/lab-3-paltovkletku/blob/main/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202023-10-22%2022-47-35.png)

Применяем конфиг, прописав netplan apply. reboot, чтобы перезагрузить систему.

Для машины В: Вызываем команду sudo nano /etc/netplan/00-installer-config.yaml. В открывшемся файле конфигурации прописываем: 

![netplan В](https://github.com/cs-itmo-2023/lab-3-paltovkletku/blob/main/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202023-10-22%2022-42-44.png)

Применяем конфиг, прописав netplan apply. reboot, чтобы перезагрузить систему.

Итак, машина А подключена к Интернету через NAT, отдельно соединена с машиной Б и отдельно - с машиной В. Так как машины Б и В соединены с А через разные сети, они не соединены между собой.

Проверка доступа:

Ping из А в Б
![access A to Б](https://github.com/cs-itmo-2023/lab-3-paltovkletku/blob/main/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202023-10-22%2022-51-42.png)

Ping из А в В
![ping из А в В](https://github.com/cs-itmo-2023/lab-3-paltovkletku/blob/main/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202023-10-22%2022-53-21.png)

Network is unreachable Б-В
![network is unreachable Б-В](https://github.com/cs-itmo-2023/lab-3-paltovkletku/blob/main/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202023-10-22%2022-56-42.png)

3 терминала:

![virtual machines](https://github.com/cs-itmo-2023/lab-3-paltovkletku/blob/main/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202023-10-22%2023-05-12.png)

## Вывод

При выполнении лабораторной работы были получены навыки создания и настройки виртуальных машин, а также настройки доступа между виртуальными машинами, настройки доступа к сети Интернет.
